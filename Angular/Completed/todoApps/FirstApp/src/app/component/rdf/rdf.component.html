<!-- <form #parentForm="ngForm" (submit)="submitForm(parentForm)">
    <ng-template ngFor let-form [ngForOf]="mainForm?.formFields" let-index="index" let-isLast="last">
        <input
            type="form.formField1.type"
            name="formFirld1_{{ form.id }}"
            [(ngModel)]="form.formField1.value"
            placeholder="form.formField1.placeholder"
            required
        />
        <div *ngIf="parentForm.submitted && !form.formField1.value">Form field 1 is required</div>
        <input
            type="form.formField2.type"
            name="formFirld2_{{ form.id }}"
            [(ngModel)]="form.formField2.value"
            placeholder="form.formField2.placeholder"
            required
        />
         <div *ngIf="parentForm.submitted && !form.formField2.value">Form field 2 is required</div>
        <button (click)="removeForm(index)">Remove form</button>
    </ng-template>
    <button type="submit">Submit</button>
    <button type="button" (click)="parentForm.reset()">
        Reset
    </button>
</form>
<button (click)="addForm()" [disabled]="(!parentForm.form.valid)">Add new form</button>-->



<h1>Angular Nested FormArray / Dynamic FormArray</h1>
 
<form [formGroup]="empForm" (ngSubmit)="onSubmit()">
  <div formArrayName="employees">
    <div *ngFor="let employee of employees().controls; let empIndex=index">
      <div
        [formGroupName]="empIndex"
        style="border: 1px solid blue; padding: 10px; width: 600px; margin: 5px;"
      >
        {{empIndex}} First Name :
        <input type="text" formControlName="firstName" />
        Last Name:
        <input type="text" formControlName="lastName" />
 
        <button (click)="removeEmployee(empIndex)">Remove</button>
 
        <div formArrayName="skills">
          <div
            *ngFor="let skill of employeeSkills(empIndex).controls; let skillIndex=index"
          >
            <div [formGroupName]="skillIndex">
              {{skillIndex}} Skill :
              <input type="text" formControlName="skill" />
              Exp:
              <input type="text" formControlName="exp" />
 
              <button (click)="removeEmployeeSkill(empIndex,skillIndex)">
                Remove
              </button>
            </div>
          </div>
        </div>
        <button type="button" (click)="addEmployeeSkill(empIndex)">
          Add Skill
        </button>
      </div>
    </div>
    <button type="button" (click)="addEmployee()">Add Employee</button>
  </div>
</form>
 
{{this.empForm.value | json}}